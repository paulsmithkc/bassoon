{"version":3,"sources":["webpack://bassoon/./src/bassoon-worker.mjs"],"names":["importScripts","self","onmessage","evt","cmd","data","args","start","req","abort","console","log","worker","bassoon","on","postMessage","event","error"],"mappings":"gDAAAA,cAAc,kBAEdC,KAAKC,UAAY,SAACC,GAChB,IAAMC,EAAMD,EAAIE,KAAKD,IACfE,EAAOH,EAAIE,KAAKC,KAFE,MAIjB,UADCF,EAEGG,EAAMD,GACV,UAHCF,IAIAI,GACKA,EAAIC,aARO,GAe1B,IAAID,EAAM,KAEJD,EAAQ,SAACD,GACb,IAOE,OANAI,QAAQC,IAAI,kBACZL,EAAKM,QAAS,GACdJ,EAAMK,QAAQP,IACVQ,GAAG,QAAQ,SAACT,GAAD,OAAUJ,KAAKc,YAAY,CAAEX,IAAK,OAAQC,KAAMA,OAC/DG,EAAIM,GAAG,OAAO,SAACE,GAAD,OAAWf,KAAKc,YAAY,CAAEX,IAAK,MAAOC,KAAMW,OAC9DR,EAAIM,GAAG,SAAS,SAACG,GAAD,OAAWhB,KAAKc,YAAY,CAAEX,IAAK,QAASC,KAAMY,QAC3D,EACP,MAAOA,GAIP,OAHAP,QAAQO,MAAMA,GACVT,GAAKA,EAAIC,QACbR,KAAKc,YAAY,CAAEX,IAAK,QAASC,KAAMY,KAChC,K","file":"bassoon-worker.min.js","sourcesContent":["importScripts('bassoon.min.js');\r\n\r\nself.onmessage = (evt) => {\r\n  const cmd = evt.data.cmd;\r\n  const args = evt.data.args;\r\n  switch (cmd) {\r\n    case 'start':\r\n      return start(args);\r\n    case 'abort':\r\n      if (req) {\r\n        return req.abort();\r\n      } else {\r\n        return false;\r\n      }\r\n  }\r\n};\r\n\r\nlet req = null;\r\n\r\nconst start = (args) => {\r\n  try {\r\n    console.log('worker started');\r\n    args.worker = false;\r\n    req = bassoon(args);\r\n    req.on('data', (data) => self.postMessage({ cmd: 'data', data: data }));\r\n    req.on('end', (event) => self.postMessage({ cmd: 'end', data: event }));\r\n    req.on('error', (error) => self.postMessage({ cmd: 'error', data: error }));\r\n    return true;\r\n  } catch (error) {\r\n    console.error(error);\r\n    if (req) req.abort();\r\n    self.postMessage({ cmd: 'error', data: error });\r\n    return false;\r\n  }\r\n};\r\n"],"sourceRoot":""}